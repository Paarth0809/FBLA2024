<!DOCTYPE html>
<html>

<head>
  <title>Signup and Login</title>
  <link rel="stylesheet" type="text/css" href="signup.css" />
  <link rel="stylesheet" href="navbar.css" />
  <link rel="stylesheet" href="footer.css" />

  <!-- This is the font and icons -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="navbar.js"></script>
</head>

<body>
  <!-- mobile version of the navbar -->
  <div class="topnav">
    <a href="index.html">
      <img src="images/transparent.png" id="logo"></img>
    </a>
    <!-- Navigation links (hidden by default) -->
    <div id="myLinks">
      <a class="linkcolor" href="index.html">Home</a>
      <a class="linkcolor" href="openings.html">Job Openings</a>
      <a class="linkcolor" href="vaccines.html">Vaccines appointments</a>
      <a class="linkcolor" href="apply.html">Apply</a>
    </div>
    <!-- "Hamburger menu" / "Bar icon" to toggle the navigation links -->
    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <!-- desktop version of the navigation bar -->
  <div class="navbar">
    <a href="index.html">
      <img src="images/Logo.png" id="logo" alt="Logo"></img>
    </a>
    <a class="links" href="index.html">Home</a>
    <a class="links" href="openings.html">Job Openings</a>
    <a class="links" href="vaccine.html">Vaccine Appointments</a>
    <a class="links" href="apply.html">Apply</a>
    <a class="links" href="login.html">Log In</a>
    <a class="links" id="Contactmargin" href="signup.html">Sign Up</a>
  </div>
  <hr id="nav-bar-split" />

  <h1>Signup</h1>
  <form id="signup-form">
    <label for="fullName">Full Name:</label>
    <input type="text" id="fullName" name="fullName" required>
    <br>
    <label for="signupEmail">Email:</label>
    <input type="email" id="signupEmail" name="signupEmail" required>
    <br>
    <label for="phoneNumber">Phone Number:</label>
    <input type="text" id="phoneNumber" name="phoneNumber" required>
    <br>
    <label for="age">Age:</label>
    <input type="text" id="age" name="age" required>
    <br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required>
    <br>
    <button type="submit">Sign Up</button>
    <h4>Already have an account?</h4>
    <a class="smallLogin" href="login.html">Click here to log in</a>
  </form>

  <div id="message"></div>
  <!-- Email JavaScript library -->
  <script src="https://smtpjs.com/v3/smtp.js"></script>
  <script>
    // send email to user saying that account was succsesfully created
    function sendEmail() {
      // Use the Email object's send function (defined in SMTPJS library).
      // SecureToken is obtained from smtpjs.com website which allows one to
      // encrypt the credentials required to send email using a SMTP server. 
      // Here we are using smtp.elasticemail.com as our SMTP server (see elasticemail.com)
      Email.send({
        SecureToken: "13956b45-d222-49d9-bb43-e6bb24c735bc ",
        To: document.getElementById('signupEmail').value,
        From: 'futuramedicalinc@gmail.com',
        Subject: "Account successfully created ",
        Body: "Full Name: " + document.getElementById("fullName").value +
          "<br>Email: " + document.getElementById("signupEmail").value +
          "<br>Phone: " + document.getElementById("phoneNumber").value +
          "<br>Age: " + document.getElementById("age").value
      })


    }

    document.getElementById('signup-form').addEventListener('submit', async (event) => {
      event.preventDefault();
      const signupEmail = document.getElementById('signupEmail').value;
      const password = document.getElementById('password').value;
      const fullName = document.getElementById("fullName").value;
      const phoneNumber = document.getElementById("phoneNumber").value;
      const age = document.getElementById("age").value;

      const response = await fetch('/signup', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ signupEmail, password, fullName, phoneNumber, age })
      });

      const message = await response.text();
      sendEmail();
      document.getElementById('message').innerText = message;
    });






  </script>


</body>

</html>